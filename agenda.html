<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agenda — Project Baco</title>
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--accent:#0070f3}
    body{font-family:Inter,Arial,sans-serif;background:var(--bg);margin:0;padding:24px}
    .wrap{max-width:1000px;margin:0 auto}
    .row{display:flex;gap:16px}
    .card{background:var(--card);padding:16px;border-radius:10px;box-shadow:0 6px 18px rgba(15,22,39,0.06)}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    h1{margin:0;font-size:1.2rem}
    .controls{display:flex;gap:8px;align-items:center}
    input,textarea,select{padding:8px;border-radius:6px;border:1px solid #e2e8f0}
    button{background:var(--accent);color:#fff;padding:8px 10px;border-radius:8px;border:0;cursor:pointer}
    #list{margin-top:12px}
    .item{display:flex;justify-content:space-between;gap:12px;padding:10px;border-bottom:1px solid #f1f5f9}
    .meta{font-size:12px;color:#666}
    .left{flex:1}
    .tags{font-size:12px;color:#888}
    .filters{display:flex;gap:8px;align-items:center}
    .small{font-size:13px;padding:6px 8px}
  </style>
</head>
<body>
  <div class="wrap">
      <header>
      <h1>Agenda</h1>
      <nav><a href="index.html">Home</a> &nbsp;|&nbsp; <a href="super.html">Super</a> &nbsp;|&nbsp; <a href="https://www.examtopics.com/questions/sentry/" target="_blank">Sentry Questions</a></nav>
    </header>

    <div class="row">
      <div class="card" style="flex:1">
        <h3>Add / Edit Item</h3>
        <div style="display:flex;flex-direction:column;gap:8px">
          <input id="title" placeholder="Title" />
          <textarea id="desc" placeholder="Description (optional)"></textarea>
          <div style="display:flex;gap:8px">
            <input id="date" type="date" />
            <input id="time" type="time" />
            <input id="tags" placeholder="Tags (comma)" />
          </div>
          <div style="display:flex;gap:8px">
            <button id="save">Save Item</button>
            <button id="clear" class="small">Clear</button>
            <button id="export" class="small">Export JSON</button>
            <label style="display:inline-flex;align-items:center;gap:6px"><span class="small">Import</span><input id="importFile" type="file" style="display:inline-block" /></label>
          </div>
          <input type="hidden" id="editing" />
        </div>
      </div>

      <div style="width:420px">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">My Items</h3>
            <div class="filters">
              <select id="filterDate" class="small"><option value="all">All</option><option value="today">Today</option><option value="week">This Week</option></select>
              <select id="statusFilter" class="small"><option value="all">All</option><option value="active">Active</option><option value="done">Done</option></select>
            </div>
          </div>
          <div id="list"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const LS_KEY = 'project_baco_agenda_v1';
    function uid() { return Math.random().toString(36).slice(2,9); }
    function load(){ try{ return JSON.parse(localStorage.getItem(LS_KEY)||'[]') }catch(e){return[]} }
    function saveAll(list){ localStorage.setItem(LS_KEY, JSON.stringify(list)); render(); }
    function addItem(it){ const list = load(); list.push(it); saveAll(list); }
    function updateItem(id, patch){ const list=load(); const i=list.findIndex(x=>x.id===id); if(i>-1){ list[i]=Object.assign({},list[i],patch); saveAll(list);} }
    function deleteItem(id){ const list=load().filter(x=>x.id!==id); saveAll(list); }

    function render(){ const listEl=document.getElementById('list'); const list=load();
      const fd=document.getElementById('filterDate').value; const st=document.getElementById('statusFilter').value;
      const now=new Date(); const startWeek=new Date(); startWeek.setDate(now.getDate()-now.getDay());
      const visible=list.filter(it=>{
        if(st==='active' && it.done) return false; if(st==='done' && !it.done) return false;
        if(fd==='today'){ const d=new Date(it.datetime); return d.toDateString()===now.toDateString(); }
        if(fd==='week'){ const d=new Date(it.datetime); return d>=startWeek && d<=now; }
        return true;
      }).sort((a,b)=>new Date(a.datetime)-new Date(b.datetime));
      listEl.innerHTML = visible.map(it=>`
        <div class="item" data-id="${it.id}">
          <div class="left">
            <div style="display:flex;align-items:center;gap:8px">
              <input type="checkbox" ${it.done? 'checked':''} data-action="toggle" />
              <strong>${escapeHtml(it.title)}</strong>
            </div>
            <div class="meta">${it.datetime ? new Date(it.datetime).toLocaleString() : ''} • <span class="tags">${escapeHtml((it.tags||'').toString())}</span></div>
            <div>${escapeHtml(it.desc||'')}</div>
          </div>
          <div style="min-width:90px;display:flex;flex-direction:column;gap:6px;align-items:flex-end">
            <button data-action="edit" class="small">Edit</button>
            <button data-action="del" class="small">Delete</button>
          </div>
        </div>
      `).join('');
      // bind actions
      listEl.querySelectorAll('[data-action]').forEach(btn=>btn.addEventListener('click', e=>{
        const action = e.target.getAttribute('data-action'); const id = e.target.closest('.item').dataset.id;
        if(action==='del'){ if(confirm('Delete item?')) deleteItem(id); }
        if(action==='edit'){ const it = load().find(x=>x.id===id); document.getElementById('title').value=it.title; document.getElementById('desc').value=it.desc||''; const dt=new Date(it.datetime||Date.now()); document.getElementById('date').value=dt.toISOString().slice(0,10); document.getElementById('time').value=dt.toTimeString().slice(0,5); document.getElementById('tags').value=(it.tags||''); document.getElementById('editing').value=id; }
        if(action==='toggle'){ const list=load(); const item=list.find(x=>x.id===id); item.done=!item.done; saveAll(list); }
      }));
    }

    function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;' }[c])); }

    document.getElementById('save').addEventListener('click', ()=>{
      const title=document.getElementById('title').value.trim(); if(!title){ alert('Title required'); return; }
      const desc=document.getElementById('desc').value.trim(); const date=document.getElementById('date').value; const time=document.getElementById('time').value; const tags=document.getElementById('tags').value;
      const dt = date ? new Date(date + (time? 'T'+time: 'T00:00')) : new Date();
      const editing=document.getElementById('editing').value;
      if(editing){ updateItem(editing, { title, desc, tags, datetime: dt.toISOString() }); document.getElementById('editing').value='';
      } else { addItem({ id:uid(), title, desc, tags, datetime: dt.toISOString(), done:false }); }
      document.getElementById('title').value=''; document.getElementById('desc').value=''; document.getElementById('date').value=''; document.getElementById('time').value=''; document.getElementById('tags').value='';
    });

    document.getElementById('clear').addEventListener('click', ()=>{ document.getElementById('title').value=''; document.getElementById('desc').value=''; document.getElementById('date').value=''; document.getElementById('time').value=''; document.getElementById('tags').value=''; document.getElementById('editing').value=''; });

    document.getElementById('export').addEventListener('click', ()=>{ const data=localStorage.getItem(LS_KEY)||'[]'; const blob=new Blob([data],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='agenda.json'; a.click(); URL.revokeObjectURL(url); });

    document.getElementById('importFile').addEventListener('change', (e)=>{
      const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ const arr=JSON.parse(r.result); if(Array.isArray(arr)){ localStorage.setItem(LS_KEY, JSON.stringify(arr)); render(); alert('Imported'); }else alert('Invalid file'); }catch(err){ alert('Invalid JSON'); } }; r.readAsText(f);
    });

    document.getElementById('filterDate').addEventListener('change', render);
    document.getElementById('statusFilter').addEventListener('change', render);

    // initial render
    render();
  </script>
</body>
</html>
